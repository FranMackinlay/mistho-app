(this["webpackJsonpeconomist-scrapper"]=this["webpackJsonpeconomist-scrapper"]||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(28),s=a.n(r),i=(a(35),a(11)),l=a(2),o=(a(36),a(4)),u=a.n(o),m=a(10),f=a(6),j=a(14),d=a.n(j),b={userSignIn:function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.email,c=t.password,e.next=3,d()({method:"post",url:"".concat("/api","/users/signin"),data:{name:a,email:n,password:c}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=a(29),h=new(a.n(p).a),O={on:function(e,t){return h.on(e,t)},once:function(e,t){return h.once(e,t)},off:function(e,t){return h.off(e,t)},emit:function(e,t){return h.emit(e,t)}};Object.freeze(O);var x=O,v=(a(56),a(0));function g(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(""),i=Object(f.a)(s,2),l=i[0],o=i[1],j=Object(n.useState)(""),d=Object(f.a)(j,2),p=d[0],h=d[1],O=Object(n.useState)(""),g=Object(f.a)(O,2),N=g[0],w=g[1],S=function(){var t=Object(m.a)(u.a.mark((function t(a){var n,c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===a||void 0===a||a.preventDefault(),n={name:l,email:p,password:N},t.prev=2,t.next=5,b.userSignIn(n);case 5:c=t.sent,(s=c.data)._id&&(localStorage.setItem("user",JSON.stringify(s)),x.emit("INPUT-USER-LOGIN",n),e.history.push("/articles")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),r("Invalid username or password");case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"login",children:[Object(v.jsx)("h1",{children:"Welcome!"}),Object(v.jsxs)("form",{className:"df fldc",onSubmit:S,children:[c&&Object(v.jsx)("span",{style:{color:"red"},children:c}),Object(v.jsx)("input",{type:"text",value:l,onChange:function(e){null===e||void 0===e||e.preventDefault(),o(e.target.value)},placeholder:"Name.."}),Object(v.jsx)("input",{type:"email",value:p,onChange:function(e){null===e||void 0===e||e.preventDefault(),h(e.target.value)},placeholder:"Email.."}),Object(v.jsx)("input",{type:"password",value:N,onChange:function(e){null===e||void 0===e||e.preventDefault(),w(e.target.value)},placeholder:"Password.."}),Object(v.jsx)("button",{type:"submit",children:"Login"})]})]})}a(58);function N(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],c=t[1];return x.on("INPUT-USER-LOGIN",(function(e){return c(e)})),Object(v.jsx)("div",{className:"navbar-container",children:Object(v.jsxs)("header",{className:"navbar fm-df fm-jucst fm-ml-2 fm-mt-2",children:[Object(v.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/The_Economist_Logo.svg/1200px-The_Economist_Logo.svg.png",alt:""}),Object(v.jsxs)("div",{className:"navbar-items fm-df fm-aliic fm-w100 fm-mx-2",children:[Object(v.jsxs)("div",{className:"fm-df fm-aliic fm-w100 fm-h100",children:[Object(v.jsxs)("div",{className:"navbar-menu navbar-item fm-df fm-aliic fm-w100 fm-mx-2",children:[Object(v.jsx)("i",{className:"fa fa-bars fm-mr-1"}),Object(v.jsx)("span",{children:"Menu"})]}),Object(v.jsx)("div",{className:"navbar-weekly-edition navbar-item fm-df fm-aliic fm-w100 fm-mx-2",children:"Weekly Edition"}),Object(v.jsxs)("div",{className:"navbar-search navbar-item fm-df fm-aliic fm-w100 fm-mx-2",children:[Object(v.jsx)("i",{className:"fa fa-search"}),Object(v.jsx)("span",{className:"fm-mx-1",children:"Search"}),Object(v.jsx)("i",{className:"fa fa-chevron-down"})]})]}),Object(v.jsxs)("div",{className:"navbar-login fm-df fm-aliic fm-h100",children:[Object(v.jsx)("button",{className:"btn btn-primary subscribe",children:"Subscribe"}),Object(v.jsx)(i.b,{to:"".concat(a.name?"/articles":"/login"),className:"fm-df fm-aliic link-to-login",children:Object(v.jsx)("span",{className:"login-boder fm-df fm-aliic",children:(null===a||void 0===a?void 0:a.name)?null===a||void 0===a?void 0:a.name:"Login"})})]})]})]})})}function w(){return Object(v.jsxs)("div",{className:"loading-box",children:[Object(v.jsx)("i",{className:"fa fa-spinner fa-spin"}),Object(v.jsx)("span",{children:"Loading"})]})}var S="/api",y={getArticles:function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d()({method:"get",headers:{Authorization:"Bearer ".concat(t)},url:"".concat(S,"/articles")});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getArticle:function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.link,c=t.slug,e.next=3,d()({method:"get",headers:{Authorization:"Bearer ".concat(a)},url:"".concat(S,"/articles/").concat(c),params:{link:n}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};a(64);function k(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!0),l=Object(f.a)(s,2),o=l[0],j=l[1],d=function(){var t=Object(m.a)(u.a.mark((function t(a){var n,c,s,i,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.location.state,c=n.link,s=n.slug,t.next=3,y.getArticle({link:c,slug:s},a.token);case 3:i=t.sent,l=i.data.article,r(l),j(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));(null===t||void 0===t?void 0:t._id)?d(t):e.history.push("/login")}),[e]),Object(v.jsx)("div",{children:o?Object(v.jsx)(w,{}):c?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(i.b,{to:"/articles",children:Object(v.jsx)("div",{className:"fm-abs fm-ml-2 ",children:Object(v.jsxs)("button",{className:"btn btn-info",children:[Object(v.jsx)("i",{className:"fa fa-arrow-left fm-mr-1"}),Object(v.jsx)("span",{children:"Go Back"})]})})}),Object(v.jsxs)("div",{className:"article-container fm-m-auto fm-pb-2",children:[Object(v.jsx)("h1",{className:"article-title",children:c.title}),Object(v.jsx)("img",{className:"fm-my-3 fm-maw100",src:c.img,alt:""}),Object(v.jsx)("p",{children:c.body})]})]}):Object(v.jsx)("div",{children:"Loading article..."})})}a(65);function I(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!0),l=Object(f.a)(s,2),o=l[0],j=l[1],d=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getArticles(t.token);case 2:a=e.sent,n=a.data.articles,r(n),j(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));return t?d(t):e.history.push("/login")}),[e]),Object(v.jsx)("div",{children:o?Object(v.jsx)(w,{}):c.length?Object(v.jsx)("ul",{className:"list-unstyled articles-list fm-df fm-flww fm-jucb fm-px-3",children:c.map((function(e,t){return Object(v.jsx)("li",{className:"article-card card fm-mr-3 fm-mb-3",children:Object(v.jsx)(i.b,{to:{pathname:"/article/".concat(e.slug),state:e},params:e.link,children:Object(v.jsxs)("div",{className:"article text-center",children:[Object(v.jsx)("img",{src:e.img,alt:"",className:"article-img fm-maw100"}),Object(v.jsx)("h3",{className:"fm-m-0 text-center fm-bold fm-p-2 fm-h50 fm-df fm-aliic",children:e.title})]})})},t)}))}):Object(v.jsx)("div",{children:"No articles were found, please try again later!"})})}var E=function(){return Object(v.jsx)("div",{children:Object(v.jsxs)(i.a,{children:[Object(v.jsx)(N,{}),Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{path:"/login",component:g}),Object(v.jsx)(l.a,{path:"/articles",component:I}),Object(v.jsx)(l.a,{path:"/article/:articleSlug",component:k}),Object(v.jsx)(l.a,{to:"/",component:g})]})]})})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(E,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.16f3a757.chunk.js.map